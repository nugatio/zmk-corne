# This file generates the GitHub Actions matrix
# For simple board + shield combinations, add them
# to the top level board and shield arrays, for more
# control, add individual board + shield combinations to
# the `include` property, e.g:
#
# board: [ "nice_nano_v2" ]
# shield: [ "corne_left", "corne_right" ]
# include:
#   - board: bdn9_rev2
#   - board: nice_nano_v2
#     shield: reviung41
#
---
include:
  - board: nice_nano_v2
    shield: corne_left nice_view_adapter nice_view
  - board: nice_nano_v2
    shield: corne_right nice_view_adapter nice_view
steps:
  - name: Checkout repository
    uses: actions/checkout@v2

  - name: Set up Python environment
    uses: actions/setup-python@v2
    with:
      python-version: '3.x'

  - name: Install Python dependencies
    run: |
      python3 -m pip install --upgrade pip
      python3 -m pip install Pillow

  - name: Convert image to C array
    run: python3 tools/convert_image.py --input tools/image.bmp --output src/config/my_image.c
